/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.13.6
 * @license MIT
 */
(function(){"use strict";var e=this;if(!e.coolie){var t="image",n="json",r="text",o="js",i="src",u="script",c="coolie modules",a={};a.version="0.13.6";var s,f=function(){return(new Date).getTime()},l=0,d=e.document,p={},v=[],h=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},g=function(e){return"array"===h(e)},y=function(e){return"function"===h(e)},_=function(e){return"string"===h(e)},m=function(e,t,n){var r,o;if(g(e))for(r=n?e.length-1:0,o=n?0:e.length;(n?r>o:o>r)&&t(r,e[r])!==!1;n?r--:r++);else if("object"==typeof e)for(r in e)if(t(r,e[r])===!1)break},b=function(){var t={},n=e.console,r=["log","warn","group","groupEnd"];return m(r,function(e,r){t[r]=function(){if(p.debug&&n&&n[r])try{n[r].apply(n,arguments)}catch(e){}}}),t}(),x=/\/[^/]+$/,w=/^((ftp|file|https?):)?\/\/[^\/]*/,A=/^\/\//,S=function(e,t){return e=e.replace(w,""),"/"===e?e:x.test(e)?t?e+"/":e.replace(x,"/"):e},j=/^\/|((http|ftp)s?:\/\/)/,$=/^(\.{1,2})\//,q=/(\/[^/]+?)?\/$/,C=function(e,t){if(!t||j.test(t))return t;var n;for(t="./"+t;n=t.match($);)t=t.replace($,""),2===n[1].length&&(e=e.replace(q,"/"));return e+t},E=function(e,t){return(t||d).getElementsByTagName(e)},L=/[\?#].*?$/,k=/\.js($|\?)/i,T=function(e,t){return e=e.replace(L,""),t?e:(q.test(e)&&(e+="index"),e+(k.test(e)?"":"."+o))},D=function(e){return T(e.hasAttribute?e.src:e.getAttribute(i,4))},J=function(e,t){return e.getAttribute("data-"+t)},R=function(e,t){var n=d.createElement(e);return m(t,function(e,t){n[e]=t}),n},U=function(e,t){(t||H).appendChild(e)},B=function(e,t){try{e.remove()}catch(n){try{(t||d).removeChild(e)}catch(n){}}},G=/loaded|complete/,H=d.body||E("body",d)[0],M=R("div",{id:c+f()});U(M);var N=/\.[^.]*$/,O=function(e){if(!p._v)return e;var t=_(p._v)?p._v:p._v[e];return t?e.replace(N,"."+t+"$&"):e},P=null,F=function(t,n){var r=O(t),o=R(u,{src:r,id:t,async:!0}),i=!1,c=function(e){if(!i){if(i=!0,e&&"error"===e.type)throw"load script error\n"+r;n!==!0&&(P=o,mt(o))}};o.onload!==s?o.onload=o.onerror=c:o.onreadystatechange=function(t){G.test(o.readyState)&&(t=t||e.event,c(t))},U(o,M)},X=function(e,t){var n={};try{n=JSON.parse(t)}catch(r){try{var o=new Function("","return "+t);n=o()}catch(i){throw"parse json error "+e}}return n},z=function(e,t){var r,o=O(e),i=new XMLHttpRequest,u=function(){if(4===i.readyState&&!r){if(r=!0,200!==i.status&&304!==i.status)throw"ajax error\n"+o;bt({_isAn:ct._isAn,id:e,url:o,deps:[],factory:function(){var r=i.responseText;return r&&t===n&&(r=X(e,r)),r}})}};i.onload=i.onreadystatechange=i.onerror=i.onabort=i.ontimeout=u,i.open("GET",o),i.send(null)},I=function(e){bt({_isAn:ct._isAn,id:e,url:O(e),deps:[],factory:function(){return e}})},K=function(e){var t=E(u,e);return t[t.length-1]},Q=K();U(Q,M);var V=function(e){return A.test(e)&&(e=location.protocol+e),(e.match(w)||[])[0]},W=a.coolieJSURL=D(Q),Y=V(W),Z=J(Q,"config"),et=J(Q,"main"),tt=S(W),nt=Z?C(tt,Z):null,rt=Z?S(nt):null,ot=Z?C(Y,nt):null,it=function(){if(!Z)return null;var e=V(ot);return e?e:(e=Y,ot=e+ot,e)}(),ut=rt,ct={},at=!1,st={},ft=[],lt={},dt=1,pt=0;a.config=function(t){if(p=t,p.version=p.version||{},ot?ut=C(rt,S(p.base,!0)):(it=V(t.base),ut=S(t.base)),_(p.version)?p._v=p.version:(p._v={},m(p.version,function(e,t){p._v[it+C(ut,e)]=t})),et){var n=ct.url=T(it+C(ut,et));ct._dfn=!1,st[n]=ct}return e.DEBUG=t.debug=t.debug!==!1,a},a.use=function(e){return at?a:(at=!0,l=f(),e&&(ct.url=it+C(ut,e),st[ct.url]=ct),ct.url?(F(ct.url),b.group(c),a):a)},a.callback=function(e){return ct._exd&&y(e)?(e.call(a,ct.exports),a):(y(e)&&v.push(e),a)};var vt=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,ht=/\\\\/g,gt=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,yt={image:t,text:r,html:r,json:n,css:r},_t=function(e){var t=[];return e.replace(ht,"").replace(vt,function(e,n,r){if(r){var i=r.match(gt),u={name:T(i[1],!!i[2]),type:i[2]?yt[i[2].toLowerCase()]:o};t.push(u)}}),t},mt=function(e){var i=!0,u=ft.shift();if(u){var c=u[0],a=u[1],s=u[2],f=e.id,l=D(e),d=S(f);y(u[2])?i=!1:y(u[1])?(c=null,a=[],s=u[1]):y(u[0])&&(s=u[0],a=_t(s.toString()),c=null),c=ct._dfn&&ct._isAn?f:c||f;var p={_isAn:i,_path:d,_node:e,id:c,url:l,deps:a,factory:s};ct.id||(i||(st[c]=st[ct.url]),p._isMain=!0,ct=p,ct._dfn=!0);var v=[];m(a,function(e,i){if(_(i)&&(i={id:i}),ct._isAn){var u=C(d,i.name);i.id=T(it+u,i.type!==o)}if(c===i.id)throw"required myself: \n"+c;if(lt[i.id]&&m(lt[i.id].deps,function(e,t){if(t===c)throw"required circle: \n"+t+"\n"+c}),!st[i.id]&&(v.push(i.id),st[i.id]=!0,dt++,ct._isAn))switch(i.type){case r:case n:z(i.id,i.type);break;case t:I(i.id);break;default:F(i.id)}}),p.deps=v,bt(p),ft.length&&P&&mt(P)}},bt=function(t){t.exports={},t._exe=function(){var n=function(e,n){var r;if(ct._isAn&&(r={name:e,type:n||o},e=it+T(C(t._path,r.name),r.type!==o)),!lt[e])throw"can not found module \n"+e+"\nbut required in\n"+t.id;return lt[e]._exe()};return function(){var r=t.id;return t._exd?lt[r].exports:(t._exd=!0,lt[r].exports=t.factory.call(e,n,t.exports,t)||t.exports,lt[r].exports)}}(),lt[t.id]=t,pt++,b.log(t.id),ft.length||pt!==dt||(p.debug===!1&&(B(M,H),B($cloneCoolie,H)),b.log("past "+(f()-l)+"ms"),b.groupEnd(c),ct._exe(),m(v,function(e,t){t.call(a,ct.exports)}))},xt=function(e,t,n){ft.push([e,t,n])};Z&&F(ot,!0),e.coolie=a,e.coolie.modules=lt,e.coolie.each=m,e.coolie.getHost=V,e.coolie.getPathJoin=C,e.coolie.getPathDir=S,e.coolie.getCurrentScript=K,e.coolie.getScriptURL=D,e.coolie.script=Q,e.define=xt,e.define.amd={},e.define.cmd={}}}).call(this);